{% extends "staffs/base.html" %}
{% load django_bootstrap5 %}
{% load crispy_forms_tags %}
{% load crispy_forms_field %}

{% block main %}
<h2>{% if day_start == "month" %}月間{% else %}本日以降の{% endif %}予定一覧</h2>

<div class="row text-center align-middle my-5 py-3">
    <div class="col-sm py-2">
        <a href="{% url 'schedules:monthlylist' year=before_year month=before_month %}">{% bootstrap_button button_type="button" size="lg" content="　前月　" %}</a>
    </div>
    <div class="col-sm fs-2 py-2">
    {% if day_start == "month" %}
        {{year}}年{{month}}月
    {% else%}
        <a href="{% url 'schedules:monthlylist' year=year month=month %}">{% bootstrap_button button_type="button" size="lg" content="当月の全てを表示" %}</a>
    {% endif %}
    </div>
    <div class="col-sm py-2">
        <a href="{% url 'schedules:monthlylist' year=next_year month=next_month %}">{% bootstrap_button button_type="button" size="lg" content="　翌月　" %}</a>
    </div>
</div>


<p><a href="{% url 'schedules:new'%}">{% bootstrap_button button_type="button" content="新規登録" %}</a></p>

{% if object_list %}
<table class="table table-sm align-middle text-center">
    <thead>
        <tr>
            <th>日</th>
            <th>時</th>
            <th>利用者</th>
            <th>臨時</th>
            <th>変更</th>
            <th>削除</th>
            <th>サービス内容</th>
            
            <th>担当</th>
            
        </tr>
    </thead>
    <tbody>
    {% for schedule in object_list %}
        <tr{% if schedule.check_flg %} class="table-danger"{% endif %}>
            <td>{{ schedule.start_date|date:"d日" }}</td>
            <td>{{ schedule.start_date|date:"G時i分" }}～{{ schedule.end_date|date:"G時i分" }}</td>
            <td>{{ schedule.careuser }}</td>
            <th>{% if schedule.def_sche_id == 0 %}臨時{% endif %}</th>
            <td><a href="{% url 'schedules:edit' schedule.pk %}">{% bootstrap_button button_type="button" content="変更" %}</a></td>
            <td><a class="btn btn-danger" href="{% url 'schedules:delete' schedule.pk %}"> 削除</a></td>
            <td>{{ schedule.service }}{% if schedule.peoples > 1 %}　×　{{ schedule.peoples }}名{% endif %}</td>
            <td>{{ schedule.staffs }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>スケジュールは登録されておりません。</p>
{% endif %}
{% endblock %}